<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FORM: store.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FORM
   &#160;<span id="projectnumber">4.2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">store.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="form3_8h_source.html">form3.h</a>&quot;</code><br />
</div>
<p><a href="store_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8713f593ce6aff17ff77d052ccb8aaf3"><td class="memItemLeft" align="right" valign="top"><a id="a8713f593ce6aff17ff77d052ccb8aaf3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SAVEREVISION</b>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:a8713f593ce6aff17ff77d052ccb8aaf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa9de8f77ebb953234c10e0c92856c3b4"><td class="memItemLeft" align="right" valign="top"><a id="aa9de8f77ebb953234c10e0c92856c3b4"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>OpenTemp</b> ()</td></tr>
<tr class="separator:aa9de8f77ebb953234c10e0c92856c3b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129e6eb612ced1667ce531c82f356847"><td class="memItemLeft" align="right" valign="top"><a id="a129e6eb612ced1667ce531c82f356847"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>SeekScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *fi, <a class="el" href="structPoSiTiOn.html">POSITION</a> *pos)</td></tr>
<tr class="separator:a129e6eb612ced1667ce531c82f356847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a4527014761a6c7ef7ff1f32731fc94"><td class="memItemLeft" align="right" valign="top"><a id="a7a4527014761a6c7ef7ff1f32731fc94"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>SetEndScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *f, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position)</td></tr>
<tr class="separator:a7a4527014761a6c7ef7ff1f32731fc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d629d42d3dad900b993ba057766171"><td class="memItemLeft" align="right" valign="top"><a id="a90d629d42d3dad900b993ba057766171"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>SetEndHScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *f, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position)</td></tr>
<tr class="separator:a90d629d42d3dad900b993ba057766171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1b9f394cdb6757645277a14a590ddd3"><td class="memItemLeft" align="right" valign="top"><a id="aa1b9f394cdb6757645277a14a590ddd3"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>SetScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *f, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position)</td></tr>
<tr class="separator:aa1b9f394cdb6757645277a14a590ddd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af00ef0d3722a45608104018fbe1e15ac"><td class="memItemLeft" align="right" valign="top"><a id="af00ef0d3722a45608104018fbe1e15ac"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>RevertScratch</b> ()</td></tr>
<tr class="separator:af00ef0d3722a45608104018fbe1e15ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911581ca272a12effd76d3689bf79120"><td class="memItemLeft" align="right" valign="top"><a id="a911581ca272a12effd76d3689bf79120"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>ResetScratch</b> ()</td></tr>
<tr class="separator:a911581ca272a12effd76d3689bf79120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ec65962e12cae2009b50221186e2ea7"><td class="memItemLeft" align="right" valign="top"><a id="a1ec65962e12cae2009b50221186e2ea7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>ReadFromScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *fi, <a class="el" href="structPoSiTiOn.html">POSITION</a> *pos, UBYTE *buffer, <a class="el" href="structPoSiTiOn.html">POSITION</a> *length)</td></tr>
<tr class="separator:a1ec65962e12cae2009b50221186e2ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a44af0eb95da8815238e0d67d501ba"><td class="memItemLeft" align="right" valign="top"><a id="a32a44af0eb95da8815238e0d67d501ba"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>AddToScratch</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *fi, <a class="el" href="structPoSiTiOn.html">POSITION</a> *pos, UBYTE *buffer, <a class="el" href="structPoSiTiOn.html">POSITION</a> *length, int withflush)</td></tr>
<tr class="separator:a32a44af0eb95da8815238e0d67d501ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04b714a023b34c09ae957c1976b90e8a"><td class="memItemLeft" align="right" valign="top"><a id="a04b714a023b34c09ae957c1976b90e8a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>CoSave</b> (UBYTE *inp)</td></tr>
<tr class="separator:a04b714a023b34c09ae957c1976b90e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada27ad061840e958f8e7cdafcdedb204"><td class="memItemLeft" align="right" valign="top"><a id="ada27ad061840e958f8e7cdafcdedb204"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>CoLoad</b> (UBYTE *inp)</td></tr>
<tr class="separator:ada27ad061840e958f8e7cdafcdedb204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6bf9bb4ebd7b19213659e33d59d314"><td class="memItemLeft" align="right" valign="top"><a id="a7f6bf9bb4ebd7b19213659e33d59d314"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>DeleteStore</b> (WORD par)</td></tr>
<tr class="separator:a7f6bf9bb4ebd7b19213659e33d59d314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5734bb98b4201482d571b5c6b6d9c8a"><td class="memItemLeft" align="right" valign="top"><a id="ae5734bb98b4201482d571b5c6b6d9c8a"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>PutInStore</b> (<a class="el" href="structs_8h.html#af54bed6ca0db2b4fb77654708b0bc25d">INDEXENTRY</a> *ind, WORD num)</td></tr>
<tr class="separator:ae5734bb98b4201482d571b5c6b6d9c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa12d861517d70fc636e407b2094705e"><td class="memItemLeft" align="right" valign="top"><a id="aaa12d861517d70fc636e407b2094705e"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>GetTerm</b> (PHEAD WORD *term)</td></tr>
<tr class="separator:aaa12d861517d70fc636e407b2094705e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8202834e572f96ad427cb647fa5b3ae1"><td class="memItemLeft" align="right" valign="top"><a id="a8202834e572f96ad427cb647fa5b3ae1"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>GetOneTerm</b> (PHEAD WORD *term, <a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *fi, <a class="el" href="structPoSiTiOn.html">POSITION</a> *pos, int par)</td></tr>
<tr class="separator:a8202834e572f96ad427cb647fa5b3ae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3778fbb201ebee45c5baef92e5b257a"><td class="memItemLeft" align="right" valign="top"><a id="af3778fbb201ebee45c5baef92e5b257a"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>GetMoreTerms</b> (WORD *term)</td></tr>
<tr class="separator:af3778fbb201ebee45c5baef92e5b257a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ca7975c40a9878796a4830ed8ed788"><td class="memItemLeft" align="right" valign="top"><a id="ad8ca7975c40a9878796a4830ed8ed788"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>GetMoreFromMem</b> (WORD *term, WORD **tpoin)</td></tr>
<tr class="separator:ad8ca7975c40a9878796a4830ed8ed788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d026b48fe6247a4ddb343d6cffa1a5b"><td class="memItemLeft" align="right" valign="top"><a id="a2d026b48fe6247a4ddb343d6cffa1a5b"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>GetFromStore</b> (WORD *to, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position, <a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a> renumber, WORD *InCompState, WORD nexpr)</td></tr>
<tr class="separator:a2d026b48fe6247a4ddb343d6cffa1a5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3ba9caef660cdd7e7b97e2c08d4790"><td class="memItemLeft" align="right" valign="top"><a id="abb3ba9caef660cdd7e7b97e2c08d4790"></a>
VOID&#160;</td><td class="memItemRight" valign="bottom"><b>DetVars</b> (WORD *term, WORD par)</td></tr>
<tr class="separator:abb3ba9caef660cdd7e7b97e2c08d4790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a758005dee720b5e7cb4efe36e53122c6"><td class="memItemLeft" align="right" valign="top"><a id="a758005dee720b5e7cb4efe36e53122c6"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>ToStorage</b> (<a class="el" href="structExPrEsSiOn.html">EXPRESSIONS</a> e, <a class="el" href="structPoSiTiOn.html">POSITION</a> *length)</td></tr>
<tr class="separator:a758005dee720b5e7cb4efe36e53122c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9bc409af55b4153c3fbe035c823ade"><td class="memItemLeft" align="right" valign="top"><a id="a2d9bc409af55b4153c3fbe035c823ade"></a>
<a class="el" href="structs_8h.html#af54bed6ca0db2b4fb77654708b0bc25d">INDEXENTRY</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>NextFileIndex</b> (<a class="el" href="structPoSiTiOn.html">POSITION</a> *indexpos)</td></tr>
<tr class="separator:a2d9bc409af55b4153c3fbe035c823ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8f52e9724831c1a6076ab6f07ec987"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#a2d8f52e9724831c1a6076ab6f07ec987">SetFileIndex</a> ()</td></tr>
<tr class="separator:a2d8f52e9724831c1a6076ab6f07ec987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9439cbbf485b3c361f783cde22787261"><td class="memItemLeft" align="right" valign="top"><a id="a9439cbbf485b3c361f783cde22787261"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>VarStore</b> (UBYTE *s, WORD n, WORD name, WORD namesize)</td></tr>
<tr class="separator:a9439cbbf485b3c361f783cde22787261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6926648e6f1143d25005476a6a8cbf7d"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#a6926648e6f1143d25005476a6a8cbf7d">TermRenumber</a> (WORD *term, <a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a> renumber, WORD nexpr)</td></tr>
<tr class="separator:a6926648e6f1143d25005476a6a8cbf7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84d0f78d7c8cb3f965f3f8ab0ab5ec2d"><td class="memItemLeft" align="right" valign="top"><a id="a84d0f78d7c8cb3f965f3f8ab0ab5ec2d"></a>
WORD&#160;</td><td class="memItemRight" valign="bottom"><b>FindrNumber</b> (WORD n, <a class="el" href="structs_8h.html#ab333f878f8e260d6a7d053134c318d85">VARRENUM</a> *v)</td></tr>
<tr class="separator:a84d0f78d7c8cb3f965f3f8ab0ab5ec2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6174572c779d929cc81273b77ef798d"><td class="memItemLeft" align="right" valign="top"><a id="ad6174572c779d929cc81273b77ef798d"></a>
<a class="el" href="structs_8h.html#af54bed6ca0db2b4fb77654708b0bc25d">INDEXENTRY</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>FindInIndex</b> (WORD expr, <a class="el" href="structFiLeDaTa.html">FILEDATA</a> *f, WORD par, WORD mode)</td></tr>
<tr class="separator:ad6174572c779d929cc81273b77ef798d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c11980267306636fd32b367aa397037"><td class="memItemLeft" align="right" valign="top"><a id="a6c11980267306636fd32b367aa397037"></a>
<a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetTable</b> (WORD expr, <a class="el" href="structPoSiTiOn.html">POSITION</a> *position, WORD mode)</td></tr>
<tr class="separator:a6c11980267306636fd32b367aa397037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cb2bef2cc8be60e5472c7b8568a0c74"><td class="memItemLeft" align="right" valign="top"><a id="a0cb2bef2cc8be60e5472c7b8568a0c74"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>CopyExpression</b> (<a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *from, <a class="el" href="structs_8h.html#acfdc9b730744e2cd3cdff195b7f98166">FILEHANDLE</a> *to)</td></tr>
<tr class="separator:a0cb2bef2cc8be60e5472c7b8568a0c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c4cf89a4c0043bf93c843d8b763362"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#a09c4cf89a4c0043bf93c843d8b763362">WriteStoreHeader</a> (WORD handle)</td></tr>
<tr class="separator:a09c4cf89a4c0043bf93c843d8b763362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6236279515281831cc92a4b17aa368"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#aac6236279515281831cc92a4b17aa368">ReadSaveHeader</a> ()</td></tr>
<tr class="separator:aac6236279515281831cc92a4b17aa368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca5317024b51e88fdb06ecacacb9d08c"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#aca5317024b51e88fdb06ecacacb9d08c">ReadSaveIndex</a> (<a class="el" href="structs_8h.html#a985717703c4c4af3f23ea19dad7e498d">FILEINDEX</a> *fileind)</td></tr>
<tr class="separator:aca5317024b51e88fdb06ecacacb9d08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db0fcca96a80ea96c32e458ced74099"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#a4db0fcca96a80ea96c32e458ced74099">ReadSaveVariables</a> (UBYTE *buffer, UBYTE *top, LONG *size, LONG *outsize, <a class="el" href="structs_8h.html#af54bed6ca0db2b4fb77654708b0bc25d">INDEXENTRY</a> *ind, LONG *stage)</td></tr>
<tr class="separator:a4db0fcca96a80ea96c32e458ced74099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6ba5aa51bd1e56096d15102b4195ce"><td class="memItemLeft" align="right" valign="top">UBYTE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#aaa6ba5aa51bd1e56096d15102b4195ce">ReadSaveTerm32</a> (UBYTE *bin, UBYTE *binend, UBYTE **bout, UBYTE *boutend, UBYTE *top, int terminbuf)</td></tr>
<tr class="separator:aaa6ba5aa51bd1e56096d15102b4195ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa679a806769abfb74d0be67c39720ae8"><td class="memItemLeft" align="right" valign="top">WORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="store_8c.html#aa679a806769abfb74d0be67c39720ae8">ReadSaveExpression</a> (UBYTE *buffer, UBYTE *top, LONG *size, LONG *outsize)</td></tr>
<tr class="separator:aa679a806769abfb74d0be67c39720ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains all functions that deal with store-files and the system independent save-files. </p>

<p class="definition">Definition in file <a class="el" href="store_8c_source.html">store.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2d8f52e9724831c1a6076ab6f07ec987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d8f52e9724831c1a6076ab6f07ec987">&#9670;&nbsp;</a></span>SetFileIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD SetFileIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the next file index and puts it into AR.StoreData.Index. TODO</p>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l02300">2300</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="a6926648e6f1143d25005476a6a8cbf7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6926648e6f1143d25005476a6a8cbf7d">&#9670;&nbsp;</a></span>TermRenumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD TermRenumber </td>
          <td>(</td>
          <td class="paramtype">WORD *&#160;</td>
          <td class="paramname"><em>term</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs_8h.html#a323639d869c15fed1226a3b508bbb1f1">RENUMBER</a>&#160;</td>
          <td class="paramname"><em>renumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>nexpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>!! WORD *memterm=term; static LONG ctrap=0; !!!</p>
<p>!! ctrap++; !!! </p>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l02407">2407</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="a09c4cf89a4c0043bf93c843d8b763362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c4cf89a4c0043bf93c843d8b763362">&#9670;&nbsp;</a></span>WriteStoreHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD WriteStoreHeader </td>
          <td>(</td>
          <td class="paramtype">WORD&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes header with information about system architecture and FORM revision to an open store file.</p>
<p>Called by <a class="el" href="store_8c.html#a2d8f52e9724831c1a6076ab6f07ec987">SetFileIndex()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>specifies open file to which header will be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l03926">3926</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="aac6236279515281831cc92a4b17aa368"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac6236279515281831cc92a4b17aa368">&#9670;&nbsp;</a></span>ReadSaveHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD ReadSaveHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the header in the save file and sets function pointers and flags according to the information found there. Must be called before any other ReadSave... function.</p>
<p>Currently works only for the exchange between 32bit and 64bit machines (WORD size must be 2 or 4 bytes)!</p>
<p>It is called by CoLoad().</p>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l04019">4019</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="aca5317024b51e88fdb06ecacacb9d08c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca5317024b51e88fdb06ecacacb9d08c">&#9670;&nbsp;</a></span>ReadSaveIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD ReadSaveIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structs_8h.html#a985717703c4c4af3f23ea19dad7e498d">FILEINDEX</a> *&#160;</td>
          <td class="paramname"><em>fileind</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a FILEINDEX from the open save file specified by AO.SaveData.Handle. Translations for adjusting endianness and data sizes are done if necessary.</p>
<p>Depends on the assumption that sizeof(FILEINDEX) is the same everywhere. If FILEINDEX or INDEXENTRY change, then this functions has to be adjusted.</p>
<p>Called by CoLoad() and FindInIndex().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileind</td><td>contains the read FILEINDEX after succesful return. must point to allocated, big enough memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l04137">4137</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="a4db0fcca96a80ea96c32e458ced74099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db0fcca96a80ea96c32e458ced74099">&#9670;&nbsp;</a></span>ReadSaveVariables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD ReadSaveVariables </td>
          <td>(</td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LONG *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LONG *&#160;</td>
          <td class="paramname"><em>outsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structs_8h.html#af54bed6ca0db2b4fb77654708b0bc25d">INDEXENTRY</a> *&#160;</td>
          <td class="paramname"><em>ind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LONG *&#160;</td>
          <td class="paramname"><em>stage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the variables from the open file specified by AO.SaveData.Handle. It reads the *size bytes and writes them to the *buffer. It is called by PutInStore().</p>
<p>If translation is necessary, the data might shrink or grow in size, then <em>*size</em> is adjusted so that the reading and writing fits into the memory from the buffer to the top. The actual number of read bytes is returned in <em>*size</em>, the number of written bytes is returned in <em>*outsize</em>.</p>
<p>If the *size is smaller than the actual size of the variables, this function will be called several times and needs to remember the current position in the variable structure. The parameter <em>stage</em> does this job. When <a class="el" href="store_8c.html#a4db0fcca96a80ea96c32e458ced74099">ReadSaveVariables()</a> is called for the first time, this parameter should have the value -1.</p>
<p>The parameter <em>ind</em> is used to get the number of variables.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>read variables are written into this allocated memory </td></tr>
    <tr><td class="paramname">top</td><td>upper end of allocated memory </td></tr>
    <tr><td class="paramname">size</td><td>number of bytes to read. might return a smaller number of read bytes if translation was necessary </td></tr>
    <tr><td class="paramname">outsize</td><td>if translation has be done, outsize contains the number of written bytes </td></tr>
    <tr><td class="paramname">ind</td><td>pointer of INDEXENTRY for the current expression. read-only </td></tr>
    <tr><td class="paramname">stage</td><td>should be -1 for the first call, will be increased by ReadSaveVariables to memorize the position in the variable structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l04323">4323</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="aaa6ba5aa51bd1e56096d15102b4195ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6ba5aa51bd1e56096d15102b4195ce">&#9670;&nbsp;</a></span>ReadSaveTerm32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UBYTE* ReadSaveTerm32 </td>
          <td>(</td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>binend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE **&#160;</td>
          <td class="paramname"><em>bout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>boutend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>terminbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a single term from the given buffer at <em>bin</em> and write the translated term back to this buffer at <em>bout</em>.</p>
<p><a class="el" href="store_8c.html#aaa6ba5aa51bd1e56096d15102b4195ce">ReadSaveTerm32()</a> is currently the only instantiation of a ReadSaveTerm-function. It only deals with data that already has the correct endianness and that is resized to 32bit words but without being renumbered or translated in any other way. It uses the compress buffer AR.CompressBuffer.</p>
<p>The function is reentrant in order to cope with nested function arguments. It is called by <a class="el" href="store_8c.html#aa679a806769abfb74d0be67c39720ae8">ReadSaveExpression()</a> and itself.</p>
<p>The <em>return</em> <em>value</em> indicates the position in the input buffer up to which the data has already been successfully processed. The parameter <em>bout</em> returns the corresponding position in the output buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bin</td><td>start of the input buffer </td></tr>
    <tr><td class="paramname">binend</td><td>end of the input buffer </td></tr>
    <tr><td class="paramname">bout</td><td>as input points to the beginning of the output buffer, as output points behind the already translated data in the output buffer </td></tr>
    <tr><td class="paramname">boutend</td><td>end of already decompressed data in output buffer </td></tr>
    <tr><td class="paramname">top</td><td>end of output buffer </td></tr>
    <tr><td class="paramname">terminbuf</td><td>flag whether decompressed data is already in the output buffer. used in recursive calls </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the next unprocessed data in the input buffer </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l04683">4683</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
<a id="aa679a806769abfb74d0be67c39720ae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa679a806769abfb74d0be67c39720ae8">&#9670;&nbsp;</a></span>ReadSaveExpression()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WORD ReadSaveExpression </td>
          <td>(</td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UBYTE *&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LONG *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LONG *&#160;</td>
          <td class="paramname"><em>outsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads an expression from the open file specified by AO.SaveData.Handle. The endianness flip and a resizing without renumbering is done in this function. Thereafter the buffer consists of chunks with a uniform maximal word size (32bit at the moment). The actual renumbering is then done by calling the function <a class="el" href="store_8c.html#aaa6ba5aa51bd1e56096d15102b4195ce">ReadSaveTerm32()</a>. The result is returned in <em>buffer</em>.</p>
<p>If the translation at some point doesn't fit into the buffer anymore, the function returns and must be called again. In any case <em>size</em> returns the number of successfully read bytes, <em>outsize</em> returns the number of successfully written bytes, and the file will be positioned at the next byte after the successfully read data.</p>
<p>It is called by PutInStore().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>output buffer, holds the (translated) expression </td></tr>
    <tr><td class="paramname">top</td><td>end of buffer </td></tr>
    <tr><td class="paramname">size</td><td>number of read bytes </td></tr>
    <tr><td class="paramname">outsize</td><td>number of written bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>= 0 everything okay, != 0 an error occurred </dd></dl>

<p class="definition">Definition at line <a class="el" href="store_8c_source.html#l05092">5092</a> of file <a class="el" href="store_8c_source.html">store.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
